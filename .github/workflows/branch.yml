name: Lint Only

on:
  push:
    branches:
      - main

jobs:
  lint:
    name: Code Quality Check (SwiftFormat & SwiftLint)
    runs-on: macos-14
    timeout-minutes: 15
    
    env:
      # Project: ManaSuite
      # Deployment: iOS 26.0, macOS 26.0
      # Localizations: de (development), en, ja
      DEVELOPER_DIR: /Applications/Xcode_16.1.app/Contents/Developer
    
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      
      - name: Setup Mise (Tool Version Manager)
        run: |
          curl https://mise.jdx.dev/install.sh | sh
          echo "$HOME/.local/share/mise/bin" >> $GITHUB_PATH
          echo "$HOME/.local/share/mise/shims" >> $GITHUB_PATH
      
      - name: Verify Xcode Installation
        run: |
          xcodebuild -version
          ls -nt /Applications/ | grep "Xcode*"
      
      - name: Install Dependencies (Homebrew)
        run: make ci-setup
      
      - name: Run Linting (SwiftFormat & SwiftLint)
        run: make lint